<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=480, initial-scale=1.0"/>
  <title>Kalkulator Resistansi Konduktor IEC</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --bg-color: #f5f5f5;
      --text-color: #000;
      --border-color: #ccc;
      --input-bg: #fff;
      --button-bg: #007bff;
      --button-text: #fff;
      --button-hover: #0056cc;
      --footer-color: #777;
      --divider: #ddd;
      --info-bg: #e8f5ff;
      --info-border: #90caf9;
      --info-color: #1976d2;
    }
    body.dark {
      --bg-color: #121212;
      --text-color: #eee;
      --border-color: #444;
      --input-bg: #1e1e1e;
      --button-bg: #4444ff;
      --button-text: #fff;
      --button-hover: #2222aa;
      --footer-color: #aaa;
      --divider: #555;
      --info-bg: #222b38;
      --info-border: #1976d2;
      --info-color: #90caf9;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 16px;
      font-family: 'Inter', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container-main {
      background: var(--input-bg);
      padding: 32px 24px;
      border-radius: 20px;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.07);
      border: 1px solid var(--border-color);
      position: relative;
    }
    .title-main {
      text-align: center;
      font-weight: 700;
      font-size: 1.4rem;
      margin-bottom: 8px;
    }
    .divider {
      height: 1px;
      width: 100%;
      background: var(--divider);
      margin: 12px 0 24px 0;
    }
    .info-area {
      display: flex;
      align-items: center;
      gap: 7px;
      background: var(--info-bg);
      border: 1.5px solid var(--info-border);
      border-radius: 10px;
      padding: 10px 14px 10px 12px;
      margin: 0 auto 20px auto;
      transition: box-shadow 0.2s;
      box-shadow: 0 3px 10px rgba(25, 118, 210, 0.07);
      cursor: pointer;
      user-select: none;
      min-width: 32px;
      max-width: 400px;
      justify-content: flex-start;
    }
    .info-area.compact {
      background: transparent;
      border: none;
      padding: 0;
      box-shadow: none;
      margin: 0;
      min-width: 32px;
      width: 32px;
      max-width: none;
      display: inline-flex;
      align-items: center;
    }
    .info-area .info-icon {
      flex-shrink: 0;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      color: var(--info-color);
      cursor: pointer;
      border-radius: 50%;
      transition: background 0.2s;
    }
    .info-area.compact .info-icon:active,
    .info-area.compact .info-icon:focus {
      background: var(--info-bg);
      outline: none;
    }
    .info-text {
      font-size: 1rem;
      color: var(--info-color);
      font-weight: 500;
      line-height: 1.45;
      margin-left: 2px;
      margin-top: 1px;
    }
    .info-text strong {
      display: block;
      margin-bottom: 2px;
      font-weight: 700;
      font-size: 1.04em;
    }
    .info-area-gap {
      height: 20px;
      width: 100%;
      display: block;
    }
    .form-row {
      display: flex !important;
      flex-direction: row !important;
      gap: 16px;
      margin-bottom: 16px;
      flex-wrap: nowrap !important;
    }
    .form-group {
      flex: 1 1 0%;
      display: flex;
      flex-direction: column;
      min-width: 0;
      width: 100%;
    }
    .form-label {
      font-size: 0.95rem;
      margin-bottom: 6px;
      font-weight: 500;
    }
    .form-input,
    select.form-input {
      padding: 10px 14px;
      border: 1.5px solid var(--border-color);
      border-radius: 12px;
      font-size: 0.95rem;
      background: var(--input-bg);
      color: var(--text-color);
      transition: border 0.2s;
      width: 100%;
    }
    .form-input:focus {
      border-color: var(--button-bg);
      outline: none;
    }
    .result-box {
      border: 1.5px solid var(--border-color);
      border-radius: 12px;
      text-align: center;
      padding: 12px 10px;
      font-size: 1rem;
      font-weight: 600;
      margin: 20px 0 28px 0;
      background: var(--input-bg);
    }
    #hasil-status {
      font-size: 0.88rem;
      margin-top: 4px;
    }
    .hint-green {
      color: green;
      font-style: italic;
      font-size: 1rem;
      font-weight: 500;
      margin-top: 8px;
      margin-bottom: 3px;
      display: block;
    }

    /* --- BUTTONS GRID --- */
    .btn-section {
      margin-top: 32px;
      margin-bottom: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: stretch;
      justify-content: center;
    }
    .btn-row1, .btn-row2, .btn-row3 {
      display: flex;
      gap: 10px;
      justify-content: center !important;
      align-items: center;
      width: 100%;
    }
    .btn-row3 {
      gap: 10px;
    }
    .btn-row3 .main-btn {
      flex: 1 0 auto;
      min-width: 100px;
      max-width: 180px;
      text-align: center;
    }
    .btn-row3 .right-actions {
      display: flex;
      gap: 6px;
      margin-left: 0;
      align-items: center;
    }
    .main-btn {
      padding: 8px 18px;
      background: var(--button-bg);
      color: var(--button-text);
      border: none;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
      min-width: 0;
      flex: 1;
      max-width: 180px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .main-btn:hover {
      background: var(--button-hover);
    }
    .icon-btn {
      background: var(--button-bg);
      color: var(--button-text);
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.25rem;
      transition: background 0.2s;
      margin-right: 2px;
    }
    .icon-btn:hover {
      background: var(--button-hover);
    }
    .footer-main {
      margin-top: 20px;
      text-align: center;
      font-size: 0.85rem;
      color: var(--footer-color);
    }
    .footer-main::before {
      content: "";
      display: block;
      width: 100%;
      height: 1px;
      background: var(--divider);
      margin-bottom: 12px;
    }

    @media (max-width: 460px) {
      .form-row { flex-direction: row !important; gap: 12px !important; flex-wrap: nowrap !important; }
      .btn-section { gap: 9px; }
      .btn-row1, .btn-row2, .btn-row3 { gap: 9px; flex-wrap: wrap; justify-content: center !important; }
      .btn-row3 { justify-content: center !important; }
      .main-btn { max-width: 100%; padding: 8px 8px; font-size: 0.92rem; }
      .icon-btn { width: 34px; height: 34px; font-size: 1.08rem; }
      .info-text { font-size: 0.98em; }
      .info-area { padding: 10px 7px 10px 8px; }
      .info-area.compact { min-width: 28px; }
      .info-area-gap { height: 16px; }
    }

    @media print {
      body {
        background: white !important;
        color: black !important;
      }
      .btn-section, .footer-main, .info-area {
        display: none !important;
      }
      .container-main {
        border: none;
        box-shadow: none;
        padding: 0;
        max-width: 100%;
      }
      .divider {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="container-main">
    <div class="title-main">Kalkulator Resistansi Konduktor IEC</div>
    <div class="divider"></div>

    <div class="form-row">
      <div class="form-group">
        <label class="form-label" for="alat">Pembacaan Alat</label>
        <div style="display: flex; gap: 8px;">
          <input type="text" class="form-input" id="alat" style="flex:1;" inputmode="decimal" pattern="[0-9]*" />
          <select class="form-input" id="alat-satuan" style="width:auto;">
            <option value="mohm">mΩ</option>
            <option value="ohm">Ω</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label" for="panjang">Panjang (Meter)</label>
        <input type="text" class="form-input" id="panjang" inputmode="decimal" pattern="[0-9]*" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label class="form-label" for="suhu">Suhu (°C)</label>
        <input type="text" class="form-input" id="suhu" inputmode="decimal" pattern="[0-9]*" />
      </div>
      <div class="form-group">
        <label class="form-label" for="faktor">Faktor Koreksi Suhu</label>
        <input type="text" class="form-input" id="faktor" readonly />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label class="form-label" for="bahan">Konduktor</label>
        <select class="form-input" id="bahan">
          <option value="CU">CU</option>
          <option value="AL">AL</option>
          <option value="TCU">TCU</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label" for="luas">Penampang</label>
        <select class="form-input" id="luas">
<option value="0.5">0,5 mm²</option>
<option value="0.75">0,75 mm²</option>
<option value="1.0">1,0 mm²</option>
<option value="1.5">1,5 mm²</option>
<option value="2.5">2,5 mm²</option>
<option value="4">4 mm²</option>
<option value="6">6 mm²</option>
<option value="10">10 mm²</option>
<option value="16">16 mm²</option>
<option value="25">25 mm²</option>
<option value="35">35 mm²</option>
<option value="50">50 mm²</option>
<option value="70">70 mm²</option>
<option value="95">95 mm²</option>
<option value="120">120 mm²</option>
<option value="150">150 mm²</option>
<option value="185">185 mm²</option>
<option value="240">240 mm²</option>
<option value="300">300 mm²</option>
<option value="400">400 mm²</option>
<option value="500">500 mm²</option>
<option value="630">630 mm²</option>
<option value="800">800 mm²</option>
<option value="1000">1000 mm²</option>
<option value="1200">1200 mm²</option>
<option value="1400">1400 mm²</option>
<option value="1600">1600 mm²</option>
<option value="1800">1800 mm²</option>
<option value="2000">2000 mm²</option>
<option value="2500">2500 mm²</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label" for="spesifikasi">Spec. Max</label>
        <input type="text" class="form-input" id="spesifikasi" readonly />
      </div>
    </div>

    <div class="result-box" id="hasil">
      <div id="hasil-nilai"></div>
      <div id="hasil-status"></div>
    </div>

    <!-- Button Section in Grid Layout -->
    <div class="btn-section" id="btnSection">
      <div class="btn-row1">
        <button class="main-btn" id="btn-iec">Spek. IEC</button>
        <button class="main-btn" id="btn-icea">Spek. ICEA</button>
        <button class="main-btn" id="btn-asnzs">Spek. AS</button>
      </div>
      <div class="btn-row2">
        <button class="main-btn" id="btn-spln">Spek. SPLN</button>
        <button class="main-btn" id="btn-simpan">Simpan Pengujian</button>
      </div>
      <div class="btn-row3">
        <div class="right-actions">
          <button class="icon-btn" id="toggleMode" title="Toggle Dark/Light" aria-label="Toggle Dark/Light">
            <span id="toggleIcon">
              <svg id="icon-sun" width="22" height="22" viewBox="0 0 22 22" fill="none">
                <circle cx="11" cy="11" r="5" stroke="currentColor" stroke-width="2"/>
                <g stroke="currentColor" stroke-width="2">
                  <line x1="11" y1="2" x2="11" y2="5"/>
                  <line x1="11" y1="17" x2="11" y2="20"/>
                  <line x1="2" y1="11" x2="5" y2="11"/>
                  <line x1="17" y1="11" x2="20" y2="11"/>
                  <line x1="5.22" y1="5.22" x2="7.07" y2="7.07"/>
                  <line x1="14.93" y1="14.93" x2="16.78" y2="16.78"/>
                  <line x1="16.78" y1="5.22" x2="14.93" y2="7.07"/>
                  <line x1="7.07" y1="14.93" x2="5.22" y2="16.78"/>
                </g>
              </svg>
            </span>
          </button>
        </div>
        <button class="main-btn" id="btn-laporan">Laporan</button>
        <div class="right-actions">
          <span id="infoArea" class="info-area compact" tabindex="0" aria-label="Tampilkan informasi aplikasi" title="Informasi">
            <span class="info-icon" id="infoIcon">
              <svg width="22" height="22" viewBox="0 0 22 22" fill="none">
                <circle cx="11" cy="11" r="10" stroke="currentColor" stroke-width="2"/>
                <rect x="10" y="10" width="2" height="7" rx="1" fill="currentColor"/>
                <rect x="10" y="6" width="2" height="2" rx="1" fill="currentColor"/>
              </svg>
            </span>
          </span>
        </div>
      </div>
    </div>
    <!-- END Button Section -->

    <div class="info-area-gap" id="infoAreaGap" style="display:none;"></div>
    <div id="infoAreaExpandedContainer"></div>

    <div class="footer-main">Made by Williyanto Adi 2025</div>
  </div>

  <script>
    // Membatasi input hanya angka & titik/koma di kolom pembacaan alat, panjang dan suhu
    function onlyNumberInput(el) {
      el.addEventListener('input', function() {
        let val = el.value;
        val = val.replace(/,/g, '.');
        val = val.replace(/[^0-9.]/g, '');
        const parts = val.split('.');
        if (parts.length > 2) {
          val = parts[0] + '.' + parts.slice(1).join('');
        }
        el.value = val;
      });
    }
    onlyNumberInput(document.getElementById("alat"));
    onlyNumberInput(document.getElementById("panjang"));
    onlyNumberInput(document.getElementById("suhu"));

    // Info Area Toggle
    const infoArea = document.getElementById("infoArea");
    const infoAreaExpandedContainer = document.getElementById("infoAreaExpandedContainer");
    const infoAreaGap = document.getElementById("infoAreaGap");
    let infoExpanded = false;
    const infoContent = `
      <div class="info-area" id="infoAreaExpanded" tabindex="0">
        <span class="info-icon" id="infoIconExpanded">
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none">
            <circle cx="11" cy="11" r="10" stroke="currentColor" stroke-width="2"/>
            <rect x="10" y="10" width="2" height="7" rx="1" fill="currentColor"/>
            <rect x="10" y="6" width="2" height="2" rx="1" fill="currentColor"/>
          </svg>
        </span>
        <span class="info-text">
          <strong>Tentang aplikasi ini</strong>
          Ini adalah aplikasi untuk menghitung nilai 
          resistansi pada konduktor Tembaga (CU), Aluminium (AL), Tembaga yang dilapisi Timah (TCU). dengan suhu dan panjang.
        </span>
      </div>
    `;
    function expandInfoArea() {
      if (!infoExpanded) {
        infoArea.style.display = "none";
        infoAreaGap.style.display = "block";
        infoAreaExpandedContainer.innerHTML = infoContent;
        infoExpanded = true;
        // Event untuk collapse
        const icon = document.getElementById("infoIconExpanded");
        const area = document.getElementById("infoAreaExpanded");
        icon.addEventListener("click", collapseInfoArea);
        area.addEventListener("click", function(e) {
          if (e.target === icon || e.target.closest('.info-icon')) collapseInfoArea();
        });
        area.addEventListener("keydown", function(e) {
          if (e.key === "Enter" || e.key === " ") {
            collapseInfoArea();
          }
        });
      }
    }
    function collapseInfoArea() {
      if (infoExpanded) {
        infoArea.style.display = "";
        infoAreaGap.style.display = "none";
        infoAreaExpandedContainer.innerHTML = "";
        infoExpanded = false;
      }
    }
    infoArea.addEventListener("click", expandInfoArea);
    infoArea.addEventListener("keydown", function(e) {
      if (e.key === "Enter" || e.key === " ") {
        expandInfoArea();
      }
    });

    // Accessibility: focus style for info icon
    infoArea.addEventListener("focus", function() {
      infoArea.style.outline = "2px solid var(--info-color)";
    });
    infoArea.addEventListener("blur", function() {
      infoArea.style.outline = "";
    });

    // Theme Toggle
    const toggleMode = document.getElementById("toggleMode");
    const toggleIcon = document.getElementById("toggleIcon");
    function setThemeIcon(isDark) {
      if (isDark) {
        // Moon icon
        toggleIcon.innerHTML = `
          <svg id="icon-moon" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M17.5 14.7A7.01 7.01 0 0 1 7.3 4.5c0-.3-.3-.5-.6-.4A9 9 0 1 0 18 18c.2-.3-.1-.6-.5-.6z"
                  stroke="currentColor" stroke-width="2" fill="currentColor"/>
          </svg>
        `;
      } else {
        // Sun icon
        toggleIcon.innerHTML = `
          <svg id="icon-sun" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <circle cx="11" cy="11" r="5" stroke="currentColor" stroke-width="2"/>
            <g stroke="currentColor" stroke-width="2">
              <line x1="11" y1="2" x2="11" y2="5"/>
              <line x1="11" y1="17" x2="11" y2="20"/>
              <line x1="2" y1="11" x2="5" y2="11"/>
              <line x1="17" y1="11" x2="20" y2="11"/>
              <line x1="5.22" y1="5.22" x2="7.07" y2="7.07"/>
              <line x1="14.93" y1="14.93" x2="16.78" y2="16.78"/>
              <line x1="16.78" y1="5.22" x2="14.93" y2="7.07"/>
              <line x1="7.07" y1="14.93" x2="5.22" y2="16.78"/>
            </g>
          </svg>
        `;
      }
    }
    toggleMode.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      setThemeIcon(document.body.classList.contains('dark'));
    });
    setThemeIcon(document.body.classList.contains('dark'));

    // Data & Kalkulasi
    const bahanEl = document.getElementById('bahan');
    const luasEl = document.getElementById('luas');
    const spesifikasiEl = document.getElementById('spesifikasi');
    const suhuEl = document.getElementById('suhu');
    const faktorEl = document.getElementById('faktor');
    const hasilNilai = document.getElementById("hasil-nilai");
    const hasilStatus = document.getElementById("hasil-status");
    const hasilEl = document.getElementById("hasil");
    const alatEl = document.getElementById("alat");
    const alatSatuanEl = document.getElementById("alat-satuan");

    let laporanPengujian = [];

    const specData = {
      CU: { 
  "0.5": "36,0",
  "0.75": "24,5",
  "1.0": "18,1",
  "1.5": "12,1",
  "2.5": "7,41",
  "4": "4,61",
  "6": "3,08",
  "10": "1,83",
  "16": "1,15",
  "25": "0,727",
  "35": "0,524",
  "50": "0,387",
  "70": "0,268",
  "95": "0,193",
  "120": "0,153",
  "150": "0,124",
  "185": "0,0991",
  "240": "0,0754",
  "300": "0,0601",
  "400": "0,0470",
  "500": "0,0366",
  "630": "0,0283",
  "800": "0,0221",
  "1000": "0,0176",
  "1200": "0,0151",
  "1400": "0,0129",
  "1600": "0,0113",
  "1800": "0,0101",
  "2000": "0,0090",
  "2500": "0,0072"
      },
      AL: { 
    "0.5": "-",
    "0.75": "-",
    "1.0": "-",
    "1.5": "-",
    "2.5": "-",
    "4": "-",
    "6": "-",
    "10": "3,08",
    "16": "1,91",
    "25": "1,20",
    "35": "0,868",
    "50": "0,641",
    "70": "0,443",
    "95": "0,320",
    "120": "0,253",
    "150": "0,206",
    "185": "0,164",
    "240": "0,125",
    "300": "0,100",
    "400": "0,0778",
    "500": "0,0605",
    "630": "0,0469",
    "800": "0,0367",
    "1000": "0,0291",
    "1200": "0,0247",
    "1400": "0,0212",
    "1600": "0,0186",
    "1800": "0,0165",
    "2000": "0,0149",
    "2500": "0,0127"
      },
      TCU: { 
    "0.5": "36,7",
    "0.75": "24,8",
    "1.0": "18,2",
    "1.5": "12,2",
    "2.5": "7,56",
    "4": "4,70",
    "6": "3,11",
    "10": "1,84",
    "16": "1,16",
    "25": "0,734",
    "35": "0,529",
    "50": "0,391",
    "70": "0,270",
    "95": "0,195",
    "120": "0,154",
    "150": "0,126",
    "185": "0,100",
    "240": "0,0762",
    "300": "0,0607",
    "400": "0,0475",
    "500": "0,0369",
    "630": "0,0286",
    "800": "0,0224",
    "1000": "0,0177",
    "1200": "0,0151",
    "1400": "0,0129",
    "1600": "0,0113",
    "1800": "0,0101",
    "2000": "0,0090",
    "2500": "0,0072"
      }
    };

    const suhuData = {
      CU: {
    21.0: "0.9961",
    21.1: "0.9957",
    21.2: "0.9953",
    21.3: "0.9949",
    21.4: "0.9945",
    21.5: "0.9941",
    21.6: "0.9938",
    21.7: "0.9934",
    21.8: "0.9930",
    21.9: "0.9926",
    22.0: "0.9922",
    22.1: "0.9918",
    22.2: "0.9914",
    22.3: "0.9910",
    22.4: "0.9907",
    22.5: "0.9903",
    22.6: "0.9899",
    22.7: "0.9895",
    22.8: "0.9891",
    22.9: "0.9887",
    23.0: "0.9883",
    23.1: "0.9880",
    23.2: "0.9876",
    23.3: "0.9872",
    23.4: "0.9868",
    23.5: "0.9864",
    23.6: "0.9861",
    23.7: "0.9857",
    23.8: "0.9853",
    23.9: "0.9849",
    24.0: "0.9845",
    24.1: "0.9841",
    24.2: "0.9838",
    24.3: "0.9834",
    24.4: "0.9830",
    24.5: "0.9826",
    24.6: "0.9822",
    24.7: "0.9819",
    24.8: "0.9815",
    24.9: "0.9811",
    25.0: "0.9807",
    25.1: "0.9804",
    25.2: "0.9800",
    25.3: "0.9796",
    25.4: "0.9792",
    25.5: "0.9788",
    25.6: "0.9785",
    25.7: "0.9781",
    25.8: "0.9777",
    25.9: "0.9773",
    26.0: "0.9770",
    26.1: "0.9766",
    26.2: "0.9762",
    26.3: "0.9758",
    26.4: "0.9755",
    26.5: "0.9751",
    26.6: "0.9747",
    26.7: "0.9743",
    26.8: "0.9740",
    26.9: "0.9736",
    27.0: "0.9732",
    27.1: "0.9729",
    27.2: "0.9725",
    27.3: "0.9721",
    27.4: "0.9717",
    27.5: "0.9714",
    27.6: "0.9710",
    27.7: "0.9706",
    27.8: "0.9703",
    27.9: "0.9699",
    28.0: "0.9695",
    28.1: "0.9692",
    28.2: "0.9688",
    28.3: "0.9684",
    28.4: "0.9680",
    28.5: "0.9677",
    28.6: "0.9673",
    28.7: "0.9669",
    28.8: "0.9666",
    28.9: "0.9662",
    29.0: "0.9658",
    29.1: "0.9655",
    29.2: "0.9651",
    29.3: "0.9647",
    29.4: "0.9644",
    29.5: "0.9640",
    29.6: "0.9637",
    29.7: "0.9633",
    29.8: "0.9629",
    29.9: "0.9626",
    30.0: "0.9622",
    30.1: "0.9618",
    30.2: "0.9615",
    30.3: "0.9611",
    30.4: "0.9607",
    30.5: "0.9604",
    30.6: "0.9600",
    30.7: "0.9597",
    30.8: "0.9593",
    30.9: "0.9589",
    31.0: "0.9586",
    31.1: "0.9582",
    31.2: "0.9578",
    31.3: "0.9575",
    31.4: "0.9571",
    31.5: "0.9568",
    31.6: "0.9564",
    31.7: "0.9560",
    31.8: "0.9557",
    31.9: "0.9553",
    32.0: "0.9550",
    32.1: "0.9546",
    32.2: "0.9543",
    32.3: "0.9539",
    32.4: "0.9535",
    32.5: "0.9532",
    32.6: "0.9528",
    32.7: "0.9525",
    32.8: "0.9521",
    32.9: "0.9518",
    33.0: "0.9514",
    33.1: "0.9510",
    33.2: "0.9507",
    33.3: "0.9503",
    33.4: "0.9500",
    33.5: "0.9496",
    33.6: "0.9493",
    33.7: "0.9489",
    33.8: "0.9486",
    33.9: "0.9482",
    34.0: "0.9479",
    34.1: "0.9475",
    34.2: "0.9472",
    34.3: "0.9468",
    34.4: "0.9464",
    34.5: "0.9461",
    34.6: "0.9457",
    34.7: "0.9454",
    34.8: "0.9450",
    34.9: "0.9447"
      },
      TCU: {
    21.0: "0.9961",
    21.1: "0.9957",
    21.2: "0.9953",
    21.3: "0.9949",
    21.4: "0.9945",
    21.5: "0.9941",
    21.6: "0.9938",
    21.7: "0.9934",
    21.8: "0.9930",
    21.9: "0.9926",
    22.0: "0.9922",
    22.1: "0.9918",
    22.2: "0.9914",
    22.3: "0.9910",
    22.4: "0.9907",
    22.5: "0.9903",
    22.6: "0.9899",
    22.7: "0.9895",
    22.8: "0.9891",
    22.9: "0.9887",
    23.0: "0.9883",
    23.1: "0.9880",
    23.2: "0.9876",
    23.3: "0.9872",
    23.4: "0.9868",
    23.5: "0.9864",
    23.6: "0.9861",
    23.7: "0.9857",
    23.8: "0.9853",
    23.9: "0.9849",
    24.0: "0.9845",
    24.1: "0.9841",
    24.2: "0.9838",
    24.3: "0.9834",
    24.4: "0.9830",
    24.5: "0.9826",
    24.6: "0.9822",
    24.7: "0.9819",
    24.8: "0.9815",
    24.9: "0.9811",
    25.0: "0.9807",
    25.1: "0.9804",
    25.2: "0.9800",
    25.3: "0.9796",
    25.4: "0.9792",
    25.5: "0.9788",
    25.6: "0.9785",
    25.7: "0.9781",
    25.8: "0.9777",
    25.9: "0.9773",
    26.0: "0.9770",
    26.1: "0.9766",
    26.2: "0.9762",
    26.3: "0.9758",
    26.4: "0.9755",
    26.5: "0.9751",
    26.6: "0.9747",
    26.7: "0.9743",
    26.8: "0.9740",
    26.9: "0.9736",
    27.0: "0.9732",
    27.1: "0.9729",
    27.2: "0.9725",
    27.3: "0.9721",
    27.4: "0.9717",
    27.5: "0.9714",
    27.6: "0.9710",
    27.7: "0.9706",
    27.8: "0.9703",
    27.9: "0.9699",
    28.0: "0.9695",
    28.1: "0.9692",
    28.2: "0.9688",
    28.3: "0.9684",
    28.4: "0.9680",
    28.5: "0.9677",
    28.6: "0.9673",
    28.7: "0.9669",
    28.8: "0.9666",
    28.9: "0.9662",
    29.0: "0.9658",
    29.1: "0.9655",
    29.2: "0.9651",
    29.3: "0.9647",
    29.4: "0.9644",
    29.5: "0.9640",
    29.6: "0.9637",
    29.7: "0.9633",
    29.8: "0.9629",
    29.9: "0.9626",
    30.0: "0.9622",
    30.1: "0.9618",
    30.2: "0.9615",
    30.3: "0.9611",
    30.4: "0.9607",
    30.5: "0.9604",
    30.6: "0.9600",
    30.7: "0.9597",
    30.8: "0.9593",
    30.9: "0.9589",
    31.0: "0.9586",
    31.1: "0.9582",
    31.2: "0.9578",
    31.3: "0.9575",
    31.4: "0.9571",
    31.5: "0.9568",
    31.6: "0.9564",
    31.7: "0.9560",
    31.8: "0.9557",
    31.9: "0.9553",
    32.0: "0.9550",
    32.1: "0.9546",
    32.2: "0.9543",
    32.3: "0.9539",
    32.4: "0.9535",
    32.5: "0.9532",
    32.6: "0.9528",
    32.7: "0.9525",
    32.8: "0.9521",
    32.9: "0.9518",
    33.0: "0.9514",
    33.1: "0.9510",
    33.2: "0.9507",
    33.3: "0.9503",
    33.4: "0.9500",
    33.5: "0.9496",
    33.6: "0.9493",
    33.7: "0.9489",
    33.8: "0.9486",
    33.9: "0.9482",
    34.0: "0.9479",
    34.1: "0.9475",
    34.2: "0.9472",
    34.3: "0.9468",
    34.4: "0.9464",
    34.5: "0.9461",
    34.6: "0.9457",
    34.7: "0.9454",
    34.8: "0.9450",
    34.9: "0.9447"
      },
      AL: {
21.0: "0.9960",
    21.1: "0.9956",
    21.2: "0.9952",
    21.3: "0.9948",
    21.4: "0.9944",
    21.5: "0.9940",
    21.6: "0.9936",
    21.7: "0.9932",
    21.8: "0.9928",
    21.9: "0.9924",
    22.0: "0.9920",
    22.1: "0.9916",
    22.2: "0.9912",
    22.3: "0.9908",
    22.4: "0.9904",
    22.5: "0.9900",
    22.6: "0.9896",
    22.7: "0.9892",
    22.8: "0.9888",
    22.9: "0.9884",
    23.0: "0.9880",
    23.1: "0.9877",
    23.2: "0.9873",
    23.3: "0.9869",
    23.4: "0.9865",
    23.5: "0.9861",
    23.6: "0.9857",
    23.7: "0.9853",
    23.8: "0.9849",
    23.9: "0.9845",
    24.0: "0.9841",
    24.1: "0.9837",
    24.2: "0.9833",
    24.3: "0.9830",
    24.4: "0.9826",
    24.5: "0.9822",
    24.6: "0.9818",
    24.7: "0.9814",
    24.8: "0.9810",
    24.9: "0.9806",
    25.0: "0.9802",
    25.1: "0.9798",
    25.2: "0.9795",
    25.3: "0.9791",
    25.4: "0.9787",
    25.5: "0.9783",
    25.6: "0.9779",
    25.7: "0.9775",
    25.8: "0.9771",
    25.9: "0.9768",
    26.0: "0.9764",
    26.1: "0.9760",
    26.2: "0.9756",
    26.3: "0.9752",
    26.4: "0.9748",
    26.5: "0.9745",
    26.6: "0.9741",
    26.7: "0.9797",
    26.8: "0.9733",
    26.9: "0.9729",
    27.0: "0.9725",
    27.1: "0.9722",
    27.2: "0.9718",
    27.3: "0.9714",
    27.4: "0.9710",
    27.5: "0.9706",
    27.6: "0.9703",
    27.7: "0.9699",
    27.8: "0.9695",
    27.9: "0.9691",
    28.0: "0.9688",
    28.1: "0.9684",
    28.2: "0.9680",
    28.3: "0.9676",
    28.4: "0.9672",
    28.5: "0.9669",
    28.6: "0.9665",
    28.7: "0.9661",
    28.8: "0.9657",
    28.9: "0.9654",
    29.0: "0.9650",
    29.1: "0.9646",
    29.2: "0.9642",
    29.3: "0.9639",
    29.4: "0.9635",
    29.5: "0.9631",
    29.6: "0.9627",
    29.7: "0.9624",
    29.8: "0.9620",
    29.9: "0.9616",
    30.0: "0.9612",
    30.1: "0.9609",
    30.2: "0.9605",
    30.3: "0.9601",
    30.4: "0.9598",
    30.5: "0.9594",
    30.6: "0.9590",
    30.7: "0.9586",
    30.8: "0.9583",
    30.9: "0.9579",
    31.0: "0.9575",
    31.1: "0.9572",
    31.2: "0.9568",
    31.3: "0.9564",
    31.4: "0.9561",
    31.5: "0.9557",
    31.6: "0.9553",
    31.7: "0.9549",
    31.8: "0.9546",
    31.9: "0.9542",
    32.0: "0.9538",
    32.1: "0.9535",
    32.2: "0.9531",
    32.3: "0.9527",
    32.4: "0.9524",
    32.5: "0.9520",
    32.6: "0.9517",
    32.7: "0.9513",
    32.8: "0.9509",
    32.9: "0.9506",
    33.0: "0.9502",
    33.1: "0.9498",
    33.2: "0.9495",
    33.3: "0.9491",
    33.4: "0.9487",
    33.5: "0.9484",
    33.6: "0.9480",
    33.7: "0.9476",
    33.8: "0.9473",
    33.9: "0.9469",
    34.0: "0.9466",
    34.1: "0.9462",
    34.2: "0.9458",
    34.3: "0.9455",
    34.4: "0.9451",
    34.5: "0.9448",
    34.6: "0.9444",
    34.7: "0.9440",
    34.8: "0.9437",
    34.9: "0.9433"
      }
    };

    function getLuasValue() {
      return luasEl.options[luasEl.selectedIndex].value;
    }

    function getGreeting(now) {
      const jam = now.getHours();
      const menit = now.getMinutes();
      const totalMenit = jam * 60 + menit;
      if (totalMenit >= 300 && totalMenit <= 659) return "Selamat Pagi,";
      if (totalMenit >= 660 && totalMenit <= 899) return "Selamat Siang,";
      if (totalMenit >= 900 && totalMenit <= 1079) return "Selamat Sore,";
      if (totalMenit >= 1080 && totalMenit <= 1439) return "Selamat Malam,";
      return "";
    }

    function updateSpec() {
      const bahan = bahanEl.value;
      const luas = getLuasValue();
      spesifikasiEl.value = specData[bahan]?.[luas] || "";
      hitungHasil();
    }

    function updateFaktor() {
      const bahan = bahanEl.value;
      const suhuValue = suhuEl.value.replace(",", ".").trim();
      let suhuNumber = parseFloat(suhuValue);
      let faktor = "";
      if (!isNaN(suhuNumber) && suhuData[bahan]) {
        if (Math.abs(suhuNumber - 21.1) < 0.0001 && suhuData[bahan]["21.1"]) {
          faktor = suhuData[bahan]["21.1"];
        } else if (suhuData[bahan][suhuNumber]) {
          faktor = suhuData[bahan][suhuNumber];
        } else if (suhuData[bahan][Math.floor(suhuNumber)]) {
          faktor = suhuData[bahan][Math.floor(suhuNumber)];
        }
      }
      faktorEl.value = faktor;
      hitungHasil();
    }

    function isInputLengkap() {
      return alatEl.value.trim() !== "" &&
        document.getElementById("panjang").value.trim() !== "" &&
        suhuEl.value.trim() !== "" &&
        faktorEl.value.trim() !== "";
    }

    function showGreetingHint() {
      const now = new Date();
      const greeting = getGreeting(now);
      if (greeting) {
        hasilStatus.innerHTML = `<span class="hint-green">${greeting} Mohon lengkapi data untuk memulai.</span>`;
      } else {
        hasilStatus.innerHTML = `<span class="hint-green">Mohon lengkapi data, untuk memulai. aplikasi ini</span>`;
      }
      hasilNilai.textContent = "";
      hasilEl.style.color = "inherit";
    }

    function hitungHasil() {
      let alatValue = alatEl.value.replace(",", ".");
      let alatNumber = parseFloat(alatValue);
      let satuan = alatSatuanEl.value;
      if (satuan === "ohm" && !isNaN(alatNumber)) {
        alatNumber = alatNumber * 1000;
      }
      const panjang = parseFloat(document.getElementById("panjang").value.replace(",", "."));
      const faktor = parseFloat(faktorEl.value.replace(",", "."));
      const bahan = bahanEl.value;
      const luas = getLuasValue();
      const specRaw = specData[bahan]?.[luas]?.replace(",", ".");
      const spec = parseFloat(specRaw);

      if (!isInputLengkap()) {
        showGreetingHint();
        return;
      }

      if (!isNaN(alatNumber) && !isNaN(panjang) && !isNaN(faktor) && panjang !== 0 && faktor !== 0) {
        const hasil = alatNumber / (panjang * faktor);
        hasilNilai.textContent = hasil.toFixed(4) + " Ω/km";

        if (!isNaN(spec)) {
          if (hasil < spec) {
            hasilEl.style.color = "green";
            hasilStatus.textContent = "Hasil pengujian memenuhi standar.";
            hasilStatus.style.color = "green";
          } else {
            hasilEl.style.color = "red";
            hasilStatus.textContent = "Hasil pengujian tidak memenuhi standar.";
            hasilStatus.style.color = "red";
          }
        } else {
          hasilEl.style.color = "gray";
          hasilStatus.textContent = "Spec tidak tersedia untuk perbandingan.";
          hasilStatus.style.color = "gray";
        }
      } else {
        showGreetingHint();
      }
    }

    function simpanPengujian() {
      const alat = alatEl.value || "-";
      const alatSatuan = alatSatuanEl.options[alatSatuanEl.selectedIndex].text || "mΩ";
      const panjang = document.getElementById("panjang").value || "-";
      const suhu = suhuEl.value || "-";
      const faktor = faktorEl.value || "-";
      const bahan = bahanEl.options[bahanEl.selectedIndex].text || "-";
      const luas = luasEl.options[luasEl.selectedIndex].text || "-";
      const spesifikasi = spesifikasiEl.value || "-";
      const hasil = hasilNilai.textContent || "-";
      const status = hasilStatus.textContent || "-";
      const now = new Date();
      const jamPengujian = now.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      const tanggalPengujian = now.toLocaleDateString('id-ID');
      laporanPengujian.push({
        alat, alatSatuan, panjang, suhu, faktor, bahan, luas, spesifikasi, hasil, status,
        tanggal: tanggalPengujian,
        jam: jamPengujian
      });
      alert("Pengujian berhasil disimpan ke laporan!");
    }

    document.getElementById("btn-simpan").addEventListener("click", simpanPengujian);

    bahanEl.addEventListener('change', () => {
      updateSpec();
      updateFaktor();
    });
    luasEl.addEventListener('change', updateSpec);
    suhuEl.addEventListener('input', updateFaktor);
    alatEl.addEventListener("input", hitungHasil);
    alatSatuanEl.addEventListener("change", hitungHasil);
    document.getElementById("panjang").addEventListener("input", hitungHasil);

    document.getElementById("btn-laporan").addEventListener("click", () => {
      if (laporanPengujian.length === 0) {
        alert("Belum ada pengujian yang disimpan dalam laporan.");
        return;
      }

      let isiLaporan = `Laporan Perhitungan Resistansi Konduktor\n`;
      isiLaporan += `Total Pengujian: ${laporanPengujian.length}\n\n`;

      laporanPengujian.forEach((uji, idx) => {
        isiLaporan += `--- Pengujian ke-${idx+1} ---\n`;
        isiLaporan += `Tanggal: ${uji.tanggal}\n`;
        isiLaporan += `Jam   : ${uji.jam}\n\n`;
        isiLaporan += `Input:\n`;
        isiLaporan += `- Pembacaan Alat: ${uji.alat} ${uji.alatSatuan}\n`;
        isiLaporan += `- Panjang (Meter): ${uji.panjang}\n`;
        isiLaporan += `- Suhu (°C): ${uji.suhu}\n`;
        isiLaporan += `- Faktor Koreksi Suhu: ${uji.faktor}\n\n`;
        isiLaporan += `Data Konduktor:\n`;
        isiLaporan += `- Jenis Konduktor: ${uji.bahan}\n`;
        isiLaporan += `- Penampang: ${uji.luas}\n`;
        isiLaporan += `- Spesifikasi Standar: ${uji.spesifikasi}\n\n`;
        isiLaporan += `Hasil Perhitungan:\n`;
        isiLaporan += `- Resistansi (Ω/km): ${uji.hasil}\n`;
        isiLaporan += `- Status Pengujian: ${uji.status}\n\n`;
      });

      const blob = new Blob([isiLaporan], {type: "text/plain"});
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "Laporan-Resistansi-Konduktor.txt";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(link.href);
    });

    document.getElementById("btn-iec").addEventListener("click", function() {
      window.location.href = "https://google.com";
    });
    document.getElementById("btn-icea").addEventListener("click", function() {
      window.location.href = "https://youtube.com";
    });
    document.getElementById("btn-asnzs").addEventListener("click", function() {
      window.location.href = "https://facebook.com";
    });
    document.getElementById("btn-spln").addEventListener("click", function() {
      window.location.href = "https://github.com";
    });

    window.addEventListener('DOMContentLoaded', () => {
      bahanEl.value = "CU";
      luasEl.value = "0.5";
      updateSpec();
      updateFaktor();
      alatEl.focus();
      showGreetingHint();
      collapseInfoArea();
    });
  </script>
</body>
</html>
